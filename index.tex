\documentclass[b5j, 9pt, tombo]{jsbook}
\usepackage[dvipdfmx]{graphicx}
\usepackage[dvipdfmx]{color}
\usepackage[utf8]{inputenc}
\usepackage{listings, jlisting}
\usepackage{color}

\definecolor{background}{rgb}{.85,.85,.85}
\definecolor{comment}{rgb}{.4,.4,.4}
\definecolor{normal}{rgb}{.2,.2,.2}
\definecolor{black}{rgb}{0.1,0.1,0.1}
\definecolor{white}{rgb}{1,1,1}
%\definecolor{purple}{rgb}{0.65, 0.12, 0.82}

% 位置調整
\voffset=-6mm
\hoffset=-12.5mm
\setlength{\topmargin}{-16mm}
\addtolength{\topmargin}{0mm}
\setlength{\oddsidemargin}{-8mm}
\addtolength{\oddsidemargin}{0mm}
\setlength{\evensidemargin}{-8mm}
\addtolength{\evensidemargin}{0mm}
\setlength\textwidth{\fullwidth}
\setlength\textheight{240mm}

\lstdefinelanguage{JavaScript}{
  identifierstyle=\color{normal},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{comment}\ttfamily
}

\lstdefinestyle{custom}{
 basicstyle=\footnotesize\ttfamily
}

\lstdefinestyle{command}{
 identifierstyle=\color{white},
 basicstyle=\footnotesize\ttfamily\color{white},
 %deletekeywords={:,-},
 commentstyle=\color{white},
 keywordstyle=\color{white},
 stringstyle=\color{white},
 numberstyle=\color{white},
 backgroundcolor=\color{normal}
}

\lstset{
extendedchars=true,
language=JavaScript,
frame=single,
framerule=0pt,
backgroundcolor=\color{background},
style=custom
}

\newcommand{\inner}[1]{[[#1]]}
\newcommand{\js}[1]{\texttt{#1}}
\newcommand{\jsproto}{\inner{Prototype}}
\newcommand{\jsnull}{\js{null}}
\newcommand{\jsundef}{\js{undefined}}
\newcommand{\jsprotoprop}{\js{prototype}}
\newcommand{\jsconstructor}{\js{constructor}}
\newcommand{\jsthis}{\js{this}}
\newcommand{\jstrue}{\js{true}}
\newcommand{\jsfalse}{\js{false}}
\newcommand{\jsvalue}{\inner{Value}}
\newcommand{\jswritable}{\inner{Writable}}
\newcommand{\jsenumerable}{\inner{Enumerable}}
\newcommand{\jsconfigurable}{\inner{Configurable}}
\newcommand{\jsget}{\inner{Get}}
\newcommand{\jsset}{\inner{Set}}
\newcommand{\jsgetprop}{\inner{GetProperty}}
\newcommand{\jsgetownprop}{\inner{GetOwnProperty}}
\newcommand{\jscanput}{\inner{CanPut}}
\newcommand{\jsput}{\inner{Put}}
\newcommand{\jscall}{\inner{Call}}
\newcommand{\jsclass}{\inner{Class}}
\newcommand{\jsextensible}{\inner{Extensible}}
\newcommand{\jshasprop}{\inner{HasProperty}}
\newcommand{\jsdelete}{\inner{Delete}}
\newcommand{\jsdefault}{\inner{DefaultValue}}
\newcommand{\jsdefownprop}{\inner{DefineOwnProperty}}

\newcommand{\imgref}[1]{(図\ref{#1})}
\newcommand{\chapref}[1]{(第\ref{#1})章}


%\renewcommand{\ref}[1]{\[\providecommand{\ref}{#1}\]}
\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}

%opening
\title{JavaScriptの薄い本}
\author{ukyo}

\begin{document}
\maketitle
\frontmatter
\input{abstract.tex}
\tableofcontents
\mainmatter
\input{proto.tex}
%\input{promise.tex}
\input{emscripten.tex}
\input{bibs.tex}
\input{end.tex}
\end{document}
